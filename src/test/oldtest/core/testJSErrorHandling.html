<html>
  <head>
<!-- IMPORTANT: do not remove the next line, it will include scripts and styles necessary for the test to run -->
<!-- #include file="${com.gentics.labs.browsertest.includedir}/head-include.inc" -->

<!-- #include file="${com.gentics.aloha.src}/test/${com.gentics.aloha.loaderprefix}testloader.html" -->
<script type="text/javascript">
// we create a plugin that produces a javascript error in the init sequence

GENTICS.Aloha.settings = {
	logLevels : {error: true, warn: false}
};

ErrorPlugin = new GENTICS.Aloha.Plugin("com.example.errorplugin");
ErrorPlugin.init = function () {
  schweinsbraten();
};
</script>

  <script type="text/javascript">

	// create the testcase
	// TODO: rename the testcase
	YAHOO.com.gentics.labs.browsertest.JSErrorHandling = new YAHOO.tool.TestCase({

	    //name of the test case - if not provided, one is auto-generated
	    // TODO: provide a proper name for the testcase
	    name : 'JS Error Handling Test',

	    //---------------------------------------------------------------------
	    // setUp and tearDown methods - optional
	    //---------------------------------------------------------------------
	    
	    /*
	     * Sets up data that is needed by each test.
	     */
	    setUp : function () {
	    },
	    
	    /*
	     * Cleans up everything that was created by setUp().
	     */
	    tearDown : function () {
			// TODO: implement teardown code for the tests
	    },

	    /**
	     * Test whether the plugin could read the settings
	     */
	    testJSError : function () {
			// check whether we logged the javascript error from above
			var logHistory = GENTICS.Aloha.Log.getLogHistory();
			var messages = '';
			for (var i = 0; i < logHistory.length; ++i) {
				messages += logHistory[i].message + '\n';
			}
			// TODO: add all log messages to the output
			YAHOO.util.Assert.areEqual(1, logHistory.length, 'Check # of logged messages: ' + messages);
	    }
	});

	// this test would fail in Google Chrome and Safari (Google Chrome and Safari do not support window.onerror), so we don't do the testcase for Google Chrome and Safari.
	if (!jQuery.browser.webkit) {
		// add our testcase
		YAHOO.com.gentics.labs.browsertest.Suite.add(YAHOO.com.gentics.labs.browsertest.JSErrorHandling);
	}

</script>
  </head>
  <body class="yui-skin-sam">

<!-- TODO: add your html code to be tested here -->
<h1>Settings Test</h1>
This tests GENTICS.Aloha.settings functions

<!-- IMPORTANT: do not remove the next line, it will include html fragments necessary for the test to run -->
<!-- #include file="${com.gentics.labs.browsertest.includedir}/body-include.inc" -->
  </body>
</html>
