<html>
  <head>
<!-- IMPORTANT: do not remove the next line, it will include scripts and styles necessary for the test to run -->
<!-- #include file="${com.gentics.labs.browsertest.includedir}/head-include.inc" -->

<!-- #include file="${com.gentics.aloha.src}/test/${com.gentics.aloha.loaderprefix}testloader.html" -->
  <script type="text/javascript">

	// create the testcase
	YAHOO.com.gentics.labs.browsertest.SetCursorPosition = new YAHOO.tool.TestCase({

	    //name of the test case - if not provided, one is auto-generated
	    name : "Test Between",
	    
	    /**
	     * Sets the reference text into the p element and initializes some helper objects.
	     */
	    setUp : function () {
			$('#content').html($('#reference').html());
			$('#content').attr('contentEditable', true);
			this.content = $('#content');
	    },

	    /**
	     * Test the jquery between function to insert something at position 0 in the text node
	     */
	    testSetCursorAtBegin : function () {
		    /*
	    	var range = new GENTICS.Utils.RangeObject({
			    startContainer : this.content.contents().get(0),
			    startOffset : 5,
			    endContainer : this.content.contents().get(0),
			    endOffset : 5
		    });
		    range.select();
		    this.content.focus();
		    YAHOO.util.UserAction.keypress(this.content.get(0), { charCode: 97 });
		    */
	    },

		doIt : function () {
	    	var range = new GENTICS.Utils.RangeObject({
			    startContainer : this.content.find('p').contents().get(2),
			    startOffset : 5,
			    endContainer : this.content.find('p').contents().get(2),
			    endOffset : 5
		    });
		    range.select();		    
		    this.content.focus();
	    },

	    doIt2 : function() {
	    	var range = new GENTICS.Utils.RangeObject({
			    startContainer : this.content.find('p').get(0),
			    startOffset : 1,
			    endContainer : this.content.find('p').contents().get(2),
			    endOffset : 4
		    });
		    range.select();
		    this.content.focus();
	    }
	});
	
	// add our testcase
	YAHOO.com.gentics.labs.browsertest.Suite.add(YAHOO.com.gentics.labs.browsertest.SetCursorPosition);
</script>
  </head>
  <body class="yui-skin-sam">
  	<!-- reference that is never modified and copied into content div before every testcase -->
  	<div id="reference" style="margin:20px; border:1px solid #000000;"><p><img src="http://farm1.static.flickr.com/66/buddyicons/48044663@N00.jpg" /><img src="http://farm1.static.flickr.com/66/buddyicons/48044663@N00.jpg" />Textknoten<br /><br /></p></div>
  	<button onclick="YAHOO.com.gentics.labs.browsertest.SetCursorPosition.doIt2()" style="margin:20px;">Select it</button>
  	
  	<!-- content paragraph that is filled with reference content before every testcase -->
  	<div id="content" style="margin:20px; border:1px solid #000000;"></div>
  	
<!-- IMPORTANT: do not remove the next line, it will include html fragments necessary for the test to run -->
<!-- #include file="${com.gentics.labs.browsertest.includedir}/body-include.inc" -->
  </body>
</html>
